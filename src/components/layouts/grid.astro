---
import clsx from 'clsx'
import type { HTMLAttributes } from 'astro/types'

type GridColumns = 1 | 2 | 3 | 4
type GridGap = 'md' | 'lg'
type GridGapX = 'md' | '3xl'
type GridGapY = 'xl'
type GridPlaceItems = 'center'

interface Props extends Omit<HTMLAttributes<'div'>, 'class' | 'style'> {
  as?: keyof HTMLElementTagNameMap
  columns?: GridColumns
  columnsAtSm?: GridColumns | undefined
  columnsAtMd?: GridColumns | undefined
  columnsAtLg?: GridColumns | undefined
  gap?: GridGap
  gapX?: GridGapX | undefined
  gapY?: GridGapY | undefined
  placeItems?: GridPlaceItems
}

const {
  as: Component = 'div',
  columns,
  columnsAtSm,
  columnsAtMd,
  columnsAtLg,
  gap,
  gapX,
  gapY,
  placeItems,
  ...htmlProps
} = Astro.props

const className = clsx(
  'grid w-full',
  {
    'gap-4': gap === 'md',
    'gap-6': gap === 'lg',
  },
  {
    'gap-x-4': gapX === 'md',
    'gap-x-24': gapX === '3xl',
  },
  {
    'gap-y-8': gapY === 'xl',
  },
  {
    'grid-cols-1': columns === 1,
    'grid-cols-2': columns === 2,
    'grid-cols-3': columns === 3,
    'grid-cols-4': columns === 4,
  },
  placeItems === 'center' && 'place-items-center',
  {
    'sm:grid-cols-1': columnsAtSm === 1,
    'sm:grid-cols-2': columnsAtSm === 2,
    'sm:grid-cols-3': columnsAtSm === 3,
    'sm:grid-cols-4': columnsAtSm === 4,
  },
  {
    'md:grid-cols-1': columnsAtMd === 1,
    'md:grid-cols-2': columnsAtMd === 2,
    'md:grid-cols-3': columnsAtMd === 3,
    'md:grid-cols-4': columnsAtMd === 4,
  },
  {
    'lg:grid-cols-1': columnsAtLg === 1,
    'lg:grid-cols-2': columnsAtLg === 2,
    'lg:grid-cols-3': columnsAtLg === 3,
    'lg:grid-cols-4': columnsAtLg === 4,
  }
)
---

<Component class={className} {...htmlProps}>
  <slot />
</Component>
